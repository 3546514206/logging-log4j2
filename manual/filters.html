<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Filters :: Apache Log4j</title>
    <link rel="canonical" href="https://logging.apache.org/log4j/2.x/manual/filters.html">
    <meta name="generator" content="Antora 3.2.0-alpha.4">
<link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/../_images/favicon.ico" type="image/x-icon">
<!-- `@asciidoctor/tabs` extension styles -->
<link rel="stylesheet" href="../_/css/vendor/tabs.css">
<style>
  /* Default `h4`, `h5`, and `h6` are smaller than the normal text, fix header font sizing: */
  .doc h1 { font-size: 1.9rem; }
  .doc h2 { font-size: 1.7rem; }
  .doc h3 { font-size: 1.5rem; font-weight: 400; }
  .doc h4 { font-size: 1.3rem; font-weight: 500; }
  .doc h5 { font-size: 1.1rem; font-weight: 500; text-decoration: underline; }
  .doc h6 { font-size: 0.9rem; font-weight: 500; text-decoration: underline; }
  /* Default `code`, `pre`, and `.colist` (source code annotations) fonts are too big, adjust them: */
  .doc .colist>table code, .doc p code, .doc thead code { font-size: 0.8em; }
  .doc pre { font-size: 0.7rem; }
  .doc .colist { font-size: 0.75rem; }
  /* Make links more visible: */
  .doc a { text-decoration: underline; }
  .doc a code { text-decoration: underline; color: #1565c0; }
  /* Tab header fonts aren't rendered good, adjusting the font weight: */
  .tablist > ul li { font-weight: 500; }
  /* `page-toclevels` greater than 4 are not supported by Antora UI, patching it: */
  .toc .toc-menu li[data-level="4"] a {
    padding-left: 2.75rem;
  }
  /* Replace the default highlight.js color for strings from red (unnecessarily signaling something negative) to green: */
  .hljs-string {
    color: #0f8532;
  }
</style>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <img src="../_/../_images/logo-small-white.png" alt="Apache Log4j"/>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://logging.apache.org">a subproject of&nbsp;<strong>Apache Logging Services</strong></a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Home</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../download.html">Download</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes.html">Release Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="https://logging.apache.org/support">Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://logging.apache.org/security">Security</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Manual</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html">API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html#loggers">Loggers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="eventlogging.html">Event Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="resource-logger.html">Resource Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="simple-logger.html">Simple Logger</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="status-logger.html">Status Logger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logbuilder.html">Fluent API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="api.html#fish-tagging">Fish tagging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="customloglevels.html">Levels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="markers.html">Markers</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="scoped-context.html">Scoped Context</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="thread-context.html">Thread Context</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="flowtracing.html">Flow Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration file</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="systemproperties.html">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="customconfig.html">Programmatic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appenders.html">Appenders</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="layouts.html">Layouts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="json-template-layout.html">JSON Template Layout</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pattern-layout.html">Pattern Layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lookups.html">Lookups</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="filters.html">Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scripts.html">Scripts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="jmx.html">JMX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="extending.html">Extending</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="performance.html">Performance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="async.html">Asynchronous loggers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="garbagefree.html">Garbage-free logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-reference.html">Plugin reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../javadoc.html">Java API reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">F.A.Q.</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migration.html">Migrating from Log4j 1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate-from-logback.html">Migrating from Logback</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate-from-slf4j.html">Migrating from SLF4J</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../hibernate.html">Integrating with Hibernate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cloud.html">Using Log4j in Cloud Enabled Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../development.html">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-flume-ng.html">Flume Appender</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-iostreams.html">Log4j IOStreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-docker.html">Log4j Docker Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../log4j-spring-cloud-config-client.html">Log4j Spring Cloud Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Related projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jakarta">Log4j Jakarta EE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/jmx-gui">Log4j JMX GUI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/kotlin">Log4j Kotlin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/scala">Log4j Scala</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/tools">Log4j Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://logging.apache.org/log4j/transform">Log4j Transformation Tools</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="index.html">Manual</a></li>
    <li>Configuration</li>
    <li><a href="filters.html">Filters</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/apache/logging-log4j2/edit/2.x/src/site/antora/modules/ROOT/pages/manual/filters.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="4">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Filters</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Log4j supports filtering of log events at each level of the logging pipeline using two features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>level</code> attributes that can be set on loggers and appender references,</p>
</li>
<li>
<p>filter components that can be attached to loggers, appenders, appender references or the global configuration object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Filters evaluate the parameters of a logging call (context-wide filter) or a log event and return one of three results:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ACCEPT</dt>
<dd>
<p>The log event is accepted by the filter and goes to the next stage of the logging pipeline,</p>
</dd>
<dt class="hdlist1">DENY</dt>
<dd>
<p>The log event is unconditionally dropped,</p>
</dd>
<dt class="hdlist1">NEUTRAL</dt>
<dd>
<p>Log4j behaves as if the filter was not present.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To decide whether a log event from a certain logger is delivered to a specific appender, the following procedure is followed:</p>
</div>
<div id="_tabs_1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="_tabs_1_xml" class="tab">
<p>XML</p>
</li>
<li id="_tabs_1_json" class="tab">
<p>JSON</p>
</li>
<li id="_tabs_1_yaml" class="tab">
<p>YAML</p>
</li>
<li id="_tabs_1_properties" class="tab">
<p>Properties</p>
</li>
</ul>
</div>
<div id="_tabs_1_xml--panel" class="tabpanel" aria-labelledby="_tabs_1_xml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration xmlns="https://logging.apache.org/xml/ns"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="
                   https://logging.apache.org/xml/ns
                   https://logging.apache.org/xml/ns/log4j-config-2.xsd"&gt;
  &lt;Appenders&gt;
    &lt;Console name="CONSOLE"&gt;
      &lt;ThresholdFilter level="WARN"/&gt; <i class="conum" data-value="6"></i><b>(6)</b>
    &lt;/Console&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="INFO"&gt;
      &lt;ThresholdFilter level="DEBUG"/&gt; <i class="conum" data-value="3"></i><b>(3)</b>
      &lt;AppenderRef ref="CONSOLE" level="WARN"&gt; <i class="conum" data-value="5"></i><b>(5)</b>
        &lt;MarkerFilter marker="ALERT"
                      onMatch="NEUTRAL"
                      onMismatch="DENY"/&gt; <i class="conum" data-value="4"></i><b>(4)</b>
      &lt;/AppenderRef&gt;
    &lt;/Root&gt;
    &lt;Logger name="org.example" level="TRACE"&gt; <i class="conum" data-value="2"></i><b>(2)</b>
      &lt;ThresholdFilter level="TRACE"/&gt; <i class="conum" data-value="3"></i><b>(3)</b>
    &lt;/Logger&gt;
  &lt;/Loggers&gt;
  &lt;MarkerFilter marker="PRIVATE"/&gt; <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_json--panel" class="tabpanel" aria-labelledby="_tabs_1_json">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "Configuration": {
    "Appenders": {
      "Console": {
        "name": "CONSOLE",
        "ThresholdFilter": {
          "level": "WARN" <i class="conum" data-value="6"></i><b>(6)</b>
        }
      }
    },
    "Loggers": {
      "Root": {
        "level": "INFO",
        "ThresholdFilter": { <i class="conum" data-value="3"></i><b>(3)</b>
          "level": "DEBUG"
        },
        "AppenderRef": {
          "ref": "CONSOLE",
          "level": "WARN", <i class="conum" data-value="5"></i><b>(5)</b>
          "MarkerFilter": { <i class="conum" data-value="4"></i><b>(4)</b>
            "marker": "ALERT",
            "onMatch": "NEUTRAL",
            "onMismatch": "DENY"
          }
        }
      },
      "Logger": {
        "name": "org.example",
        "level": "TRACE" <i class="conum" data-value="2"></i><b>(2)</b>
      }
    }
  },
  "MarkerFilter": { <i class="conum" data-value="1"></i><b>(1)</b>
    "marker": "PRIVATE"
  }
}</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_yaml--panel" class="tabpanel" aria-labelledby="_tabs_1_yaml">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">Configuration:
  Appenders:
    Console:
      name: "CONSOLE"
      ThresholdFilter: <i class="conum" data-value="6"></i><b>(6)</b>
        level: "WARN"
  Loggers:
    Root:
      level: "INFO"
      ThreadsholdFilter: <i class="conum" data-value="3"></i><b>(3)</b>
        level: "DEBUG"
      AppenderRef:
        ref: "CONSOLE"
        level: "WARN" <i class="conum" data-value="5"></i><b>(5)</b>
        MarkerFilter: <i class="conum" data-value="4"></i><b>(4)</b>
          marker: "ALERT"
          onMatch: "NEUTRAL"
          onMismatch: "DENY"
      Logger:
        name: "org.example"
        level: "TRACE" <i class="conum" data-value="2"></i><b>(2)</b>
        ThresholdFilter:
          level: "TRACE" <i class="conum" data-value="3"></i><b>(3)</b>
  MarkerFilter: <i class="conum" data-value="1"></i><b>(1)</b>
    marker: "PRIVATE"</code></pre>
</div>
</div>
</div>
<div id="_tabs_1_properties--panel" class="tabpanel" aria-labelledby="_tabs_1_properties">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">appender.0.type = Console
appender.0.name = CONSOLE
appender.0.filter.type = ThresholdFilter <i class="conum" data-value="6"></i><b>(6)</b>
appender.0.filter.level = WARN

rootLogger.level = INFO
rootLogger.filter.type = ThresholdFilter <i class="conum" data-value="3"></i><b>(3)</b>
rootLogger.filter.level = DEBUG
rootLogger.appenderRef.0.ref = CONSOLE
rootLogger.appenderRef.0.level = WARN <i class="conum" data-value="5"></i><b>(5)</b>
rootLogger.appenderRef.0.filter.type = MarkerFilter <i class="conum" data-value="4"></i><b>(4)</b>
rootLogger.appenderRef.0.filter.marker = ALERT
rootLogger.appenderRef.0.filter.onMatch = NEUTRAL
rootLogger.appenderRef.0.filter.onMismatch = DENY

logger.0.name = org.example
logger.0.level = DEBUG <i class="conum" data-value="2"></i><b>(2)</b>
logger.0.filter.type = ThresholdFilter <i class="conum" data-value="3"></i><b>(3)</b>
logger.0.filter.level = TRACE

filter.type = MarkerFilter <i class="conum" data-value="1"></i><b>(1)</b>
filter.marker = PRIVATE</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>First the context-wide filter is consulted.
If it returns <code>ACCEPT</code> the log message goes directly to point 3.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Then Log4j checks the message against the configured logger level.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The filter configured on a logger is applied next.
If the logger is additive, the filter on the parent logger is applied recursively until we end up on the logger that references the given appender.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Next comes the turn of the filter configured on an appender reference,</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>followed by a level check against the configured level of the reference.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The process ends with the filter attached to an appender.</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For performance reasons, log events should be filtered as soon as possible in the logging pipeline.
This reduces the costs (formatting, transfer through an asynchronous barrier) of disabled log events.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Users migrating from Log4j 1 often replace the <code>threshold</code> property of a Log4j 1 appender with a <a href="#ThresholdFilter">ThresholdFilter</a> on the equivalent Log4j 2 appender.</p>
</div>
<div class="paragraph">
<p>Using the <code>level</code> property of appender references will give a better performance.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="BurstFilter"><a class="anchor" href="#BurstFilter"></a>BurstFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The BurstFilter provides a mechanism to control the rate at which LogEvents are processed by silently discarding events after the maximum limit has been reached.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Burst Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of messages to be filtered. Anything at or below
this level will be filtered out if <code>maxBurst</code> has been exceeded. The
default is WARN meaning any messages that are higher than warn will be
logged regardless of the size of a burst.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The average number of events per second to allow.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxBurst</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of events that can occur before
events are filtered for exceeding the average rate. The default is 10
times the rate.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A configuration containing the BurstFilter might look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="CompositeFilter"><a class="anchor" href="#CompositeFilter"></a>CompositeFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The CompositeFilter provides a way to specify more than one filter.
It is added to the configuration as a filter element and contains other filters to be evaluated.
The filter element accepts no parameters.</p>
</div>
<div class="paragraph">
<p>A configuration containing the CompositeFilter might look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Filters&gt;
    &lt;MarkerFilter marker="EVENT" onMatch="ACCEPT" onMismatch="NEUTRAL"/&gt;
    &lt;DynamicThresholdFilter key="loginId" defaultThreshold="ERROR"
                            onMatch="ACCEPT" onMismatch="NEUTRAL"&gt;
      &lt;KeyValuePair key="User1" value="DEBUG"/&gt;
    &lt;/DynamicThresholdFilter&gt;
  &lt;/Filters&gt;
  &lt;Appenders&gt;
    &lt;File name="Audit" fileName="logs/audit.log"&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
    &lt;/File&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name="EventLogger" level="info"&gt;
      &lt;AppenderRef ref="Audit"/&gt;
    &lt;/Logger&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DynamicThresholdFilter"><a class="anchor" href="#DynamicThresholdFilter"></a>DynamicThresholdFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DynamicThresholdFilter allows filtering by log level based on specific attributes.
For example, if the user&#8217;s loginId is being captured in the ThreadContext Map then it is possible to enable debug logging for only that user.
If the log event does not contain the specified ThreadContext item NEUTRAL will be returned.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Dynamic Threshold Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the item in the ThreadContext Map to compare.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultThreshold</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of messages to be filtered. The default
threshold only applies if the log event contains the specified
ThreadContext Map item and its value do not match any key in the
key/value pairs.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyValuePair</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValuePair[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more KeyValuePair elements that
define the matching value for the key and the Level to evaluate when the
key matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is a sample configuration containing the DynamicThresholdFilter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;DynamicThresholdFilter key="loginId" defaultThreshold="ERROR"
                          onMatch="ACCEPT" onMismatch="NEUTRAL"&gt;
    &lt;KeyValuePair key="User1" value="DEBUG"/&gt;
  &lt;/DynamicThresholdFilter&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="LevelRangeFilter"><a class="anchor" href="#LevelRangeFilter"></a>LevelRangeFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>LevelRangeFilter</code> allows filtering against a level range, where levels get compared by their associated integral values; <code>OFF</code> has an integral value of 0, <code>FATAL</code> 100, <code>ERROR</code> 200, and so on.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. <code>LevelRangeFilter</code> parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>minLevel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the minimum level threshold (defaults to <code>OFF</code>, which has an integral value of 0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxLevel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the maximum level threshold (defaults to <code>ALL</code>, which has an integral value of <code>Integer.MAX_VALUE</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Filter.Result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the result to return on a match, where allowed values are <code>ACCEPT</code>, <code>DENY</code>, or <code>NEUTRAL</code> (default)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Filter.Result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the result to return on a mismatch, where allowed values are <code>ACCEPT</code>, <code>DENY</code> (default), or <code>NEUTRAL</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the following example configuration, a <code>LevelRangeFilter</code> is configured with <code>maxLevel</code> set to <code>INFO</code>.
The filter will return <code>onMismatch</code> result (i.e., <code>DENY</code>, the default) for log events of level with higher integral values than <code>INFO</code>; i.e., <code>DEBUG</code>, <code>TRACE</code>, etc.</p>
</div>
<div class="listingblock">
<div class="title">Example configuration using <code>LevelRangeFilter</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="WARN" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;Console name="STDOUT"&gt;
      &lt;LevelRangeFilter maxLevel="INFO"/&gt;
      &lt;PatternLayout pattern="%d %p %c{1.} [%t] %m%n"/&gt;
    &lt;/Console&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="ERROR"&gt;
      &lt;AppenderRef ref="STDOUT"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="MapFilter"><a class="anchor" href="#MapFilter"></a>MapFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MapFilter allows filtering against data elements that are in a MapMessage.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Map Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyValuePair</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValuePair[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more KeyValuePair elements that
define the key in the map and the value to match. If the same key is
specified more than once then the check for that key will automatically
be an "or" since a Map can only contain a single value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the operator is "or" then a match by any one of
the key/value pairs will be considered to be a match, otherwise all the
key/value pairs must match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As in this configuration, the MapFilter can be used to log particular events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;MapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
    &lt;KeyValuePair key="eventId" value="Login"/&gt;
    &lt;KeyValuePair key="eventId" value="Logout"/&gt;
  &lt;/MapFilter&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This sample configuration will exhibit the same behavior as the preceding example since the only logger configured is the root.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;MapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
        &lt;KeyValuePair key="eventId" value="Login"/&gt;
        &lt;KeyValuePair key="eventId" value="Logout"/&gt;
      &lt;/MapFilter&gt;
      &lt;AppenderRef ref="RollingFile"&gt;
      &lt;/AppenderRef&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This third sample configuration will exhibit the same behavior as the preceding examples since the only logger configured is the root and the root is only configured with a single appender reference.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"&gt;
        &lt;MapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
          &lt;KeyValuePair key="eventId" value="Login"/&gt;
          &lt;KeyValuePair key="eventId" value="Logout"/&gt;
        &lt;/MapFilter&gt;
      &lt;/AppenderRef&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="MarkerFilter"><a class="anchor" href="#MarkerFilter"></a>MarkerFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MarkerFilter compares the configured Marker value against the Marker that is included in the LogEvent.
A match occurs when the Marker name matches either the Log Event&#8217;s Marker or one of its parents.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Marker Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marker</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Marker to compare.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender if the Marker matches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;MarkerFilter marker="FLOW" onMatch="ACCEPT" onMismatch="DENY"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="MutableThreadContextMapFilter"><a class="anchor" href="#MutableThreadContextMapFilter"></a>MutableThreadContextMapFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MutableThreadContextMapFilter or MutableContextMapFilter allows filtering against data elements that are in the current context.
By default, this is the ThreadContext Map.
The values to compare are defined externally and can be periodically polled for changes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Mutable Context Map Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configLocation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A file path or URI that points to the configuration. See below for a sample configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the operator is "or" then a match by any one of
the key/value pairs will be considered to be a match, otherwise all the
key/value pairs must match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pollInterval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of seconds to wait before checking to see if the configuration has been modified. When using HTTP or HTTPS the server must support the If-Modified-Since header and return a Last-Modified header containing the date and time the file was last modified. Note that by default only the https, file, and jar protocols are allowed. Support for other protocols can be enabled by specifying them in the <code>log4j2.Configuration.allowedProtocols</code> system property</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender if the Marker matches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;MutableContextMapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"
    configLocation="http://localhost:8080/threadContextFilter.json" pollInterval="300"/&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration file supplied to the filter should look similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "configs": {
    "loginId": ["rgoers@apache.org", "logging@apache.org"],
    "accountNumber": ["30510263"]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="NoMarkerFilter"><a class="anchor" href="#NoMarkerFilter"></a>NoMarkerFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The NoMarkerFilter checks that there is no marker included in the LogEvent.
A match occurs when there is no marker in the Log Event.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. No Marker Filter Parameters</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender if no marker is there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;NoMarkerFilter onMatch="ACCEPT" onMismatch="DENY"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="RegexFilter"><a class="anchor" href="#RegexFilter"></a>RegexFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RegexFilter allows the formatted or unformatted message to be compared against a regular expression.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Regex Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>regex</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The regular expression.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>useRawMsg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true the unformatted message will be used,
otherwise, the formatted message will be used. The default value is
false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender if it contains the word "test":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;RegexFilter regex=".* test .*" onMatch="ACCEPT" onMismatch="DENY"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
<div id="Script" class="paragraph">
<p>The ScriptFilter executes a script that returns true or false.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Script Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>script</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script, ScriptFile or ScriptRef</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Script element that specifies the logic to be executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the script returns true. Can be
ACCEPT, DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter returns false. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Script Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configuration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Configuration that owns this
ScriptFilter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The logging Level associated with the event. Only present
when configured as a global filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>loggerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the logger. Only present when
configured as a global filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logEvent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LogEvent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The LogEvent being processed. Not present when
configured as a global filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>marker</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Marker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Marker passed on the logging call, if any. Only
present when configured as a global filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Message associated with the logging call. Only
present when configured as a global filter.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parameters</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The parameters passed to the logging call. Only
present when configured as a global filter. Some Messages include the
parameters as part of the Message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>throwable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Throwable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Throwable passed to the logging call, if any.
Only present when configured as a global filter. Som Messages include
Throwable as part of the Message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>substitutor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StrSubstitutor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The StrSubstitutor is used to replace lookup variables.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The sample below shows how to declare script fields and then reference them in specific components.
See
<a href="appenders.html#ScriptCondition" class="xref page">ScriptCondition</a> for an example of how the <code>ScriptPlugin</code> element can be used to embed script code directly in the configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="ERROR"&gt;
  &lt;Scripts&gt;
    &lt;ScriptFile name="filter.js" language="JavaScript" path="src/test/resources/scripts/filter.js" charset="UTF-8" /&gt;
    &lt;ScriptFile name="filter.groovy" language="groovy" path="src/test/resources/scripts/filter.groovy" charset="UTF-8" /&gt;
  &lt;/Scripts&gt;
  &lt;Appenders&gt;
    &lt;List name="List"&gt;
      &lt;PatternLayout pattern="[%-5level] %c{1.} %msg%n"/&gt;
    &lt;/List&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Logger name="TestJavaScriptFilter" level="trace" additivity="false"&gt;
      &lt;AppenderRef ref="List"&gt;
        &lt;ScriptFilter onMatch="ACCEPT" onMisMatch="DENY"&gt;
          &lt;ScriptRef ref="filter.js" /&gt;
        &lt;/ScriptFilter&gt;
      &lt;/AppenderRef&gt;
    &lt;/Logger&gt;
    &lt;Logger name="TestGroovyFilter" level="trace" additivity="false"&gt;
      &lt;AppenderRef ref="List"&gt;
        &lt;ScriptFilter onMatch="ACCEPT" onMisMatch="DENY"&gt;
          &lt;ScriptRef ref="filter.groovy" /&gt;
        &lt;/ScriptFilter&gt;
      &lt;/AppenderRef&gt;
    &lt;/Logger&gt;
    &lt;Root level="trace"&gt;
      &lt;AppenderRef ref="List" /&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="StructuredDataFilter"><a class="anchor" href="#StructuredDataFilter"></a>StructuredDataFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The StructuredDataFilter is a MapFilter that also allows filtering on the event id, type and message.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. StructuredData Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyValuePair</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValuePair[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more KeyValuePair elements that
define the key in the map and the value to match on. "id", "id.name",
"type", and "message" should be used to match the StructuredDataId,
the name portion of the StructuredDataId, the type, and the formatted
message respectively. If the same key is specified more than once then
the check for that key will automatically be an "or" since a Map can
only contain a single value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the operator is "or" then a match by any one of
the key/value pairs will be considered to be a match, otherwise all the
key/value pairs must match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As in this configuration, the StructuredDataFilter can be used to log particular events:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;StructuredDataFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
    &lt;KeyValuePair key="id" value="Login"/&gt;
    &lt;KeyValuePair key="id" value="Logout"/&gt;
  &lt;/StructuredDataFilter&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ThreadContextMapFilter"><a class="anchor" href="#ThreadContextMapFilter"></a>ThreadContextMapFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ThreadContextMapFilter or ContextMapFilter allows filtering against data elements that are in the current context.
By default, this is the ThreadContext Map.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Context Map Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyValuePair</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KeyValuePair[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more KeyValuePair elements that
define the key in the map and the value to match. If the same key is
specified more than once then the check for that key will automatically
be an "or" since a Map can only contain a single value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the operator is "or" then a match by any one of
the key/value pairs will be considered to be a match, otherwise all the
key/value pairs must match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A configuration containing the ContextMapFilter might look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;ContextMapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
    &lt;KeyValuePair key="User1" value="DEBUG"/&gt;
    &lt;KeyValuePair key="User2" value="WARN"/&gt;
  &lt;/ContextMapFilter&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ContextMapFilter can also be applied to a logger for filtering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;BurstFilter level="INFO" rate="16" maxBurst="100"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
      &lt;ContextMapFilter onMatch="ACCEPT" onMismatch="NEUTRAL" operator="or"&gt;
        &lt;KeyValuePair key="foo" value="bar"/&gt;
        &lt;KeyValuePair key="User2" value="WARN"/&gt;
      &lt;/ContextMapFilter&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ThresholdFilter"><a class="anchor" href="#ThresholdFilter"></a>ThresholdFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This filter returns the onMatch result if the level in the LogEvent is the same or more specific than the configured level and the <code>onMismatch</code>
value otherwise.
For example, if the ThresholdFilter is configured with Level ERROR and the LogEvent contains Level DEBUG then the <code>onMismatch</code>
value will be returned since ERROR events are more specific than DEBUG.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Threshold Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>level</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A valid Level name to match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender if the level matches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;ThresholdFilter level="TRACE" onMatch="ACCEPT" onMismatch="DENY"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TimeFilter"><a class="anchor" href="#TimeFilter"></a>TimeFilter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The time filter can be used to restrict the filter to only a certain portion of the day.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Time Filter Parameters</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>start</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A time in HH:mm:ss format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>end</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A time in HH:mm:ss format. Specifying an end time less
than the start time will result in no log entries being written.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timezone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timezone to use when comparing to the event
timestamp.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter matches. Can be ACCEPT,
DENY or NEUTRAL. The default value is NEUTRAL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action to take when the filter does not match. Can
be ACCEPT, DENY or NEUTRAL. The default value is DENY.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A sample configuration that only allows the event to be written by the appender from 5:00 to 5:30 am each day using the default timezone:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Configuration status="warn" name="MyApp"&gt;
  &lt;Appenders&gt;
    &lt;RollingFile name="RollingFile" fileName="logs/app.log"
                 filePattern="logs/app-%d{MM-dd-yyyy}.log.gz"&gt;
      &lt;TimeFilter start="05:00:00" end="05:30:00" onMatch="ACCEPT" onMismatch="DENY"/&gt;
      &lt;PatternLayout&gt;
        &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
      &lt;/PatternLayout&gt;
      &lt;TimeBasedTriggeringPolicy /&gt;
    &lt;/RollingFile&gt;
  &lt;/Appenders&gt;
  &lt;Loggers&gt;
    &lt;Root level="error"&gt;
      &lt;AppenderRef ref="RollingFile"/&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;
&lt;/Configuration&gt;</code></pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Copyright © 1999-2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>.
    Licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache Software License, Version 2.0</a>.
    Please read our <a href="https://privacy.apache.org/policies/privacy-policy-public.html">privacy policy</a>.
  </p>
  <p>
    Apache, Log4j, and the Apache feather logo are trademarks or registered trademarks of The Apache Software Foundation.
    Oracle and Java are registered trademarks of Oracle and/or its affiliates.
    Other names may be trademarks of their respective owners.
  </p>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<!-- `@asciidoctor/tabs` extension scripts -->
<script async src="../_/js/vendor/tabs.js"></script>
  </body>
</html>
